CC = @CC@
SED = @SED@
CFLAGS = @CFLAGS@ @GLIB_CFLAGS@ @DBUS_GLIB_CFLAGS@ \
    @LIBXFCE4PANEL_CFLAGS@
LDFLAGS = @LDFLAGS@
LIBS = @GLIB_LIBS@ @DBUS_GLIB_LIBS@ \
    @LIBXFCE4PANEL_LIBS@
INSTALL_SH = @INSTALL@
prefix = @prefix@
exec_prefix = @exec_prefix@
libdir = @libdir@
libexecdir = @libexecdir@
datarootdir = @datarootdir@
DESTDIR?=

all: xmonad-log-applet xmonad-log-applet.desktop

install:
	$(INSTALL_SH) -d $(DESTDIR)$(libexecdir)/xfce4/panel-plugins
	$(INSTALL_SH) -d $(DESTDIR)$(datarootdir)/xfce4/panel-plugins
	$(INSTALL_SH) -d $(DESTDIR)$(datarootdir)/icons/hicolor/48x48/apps
	$(INSTALL_SH) -m 0755 xmonad-log-applet $(DESTDIR)$(libexecdir)/xfce4/panel-plugins
	$(INSTALL_SH) -m 0644 xmonad-log-applet.desktop $(DESTDIR)$(datarootdir)/xfce4/panel-plugins
	$(INSTALL_SH) -m 0644 xmonad48.png $(DESTDIR)$(datarootdir)/icons/hicolor/48x48/apps

xmonad-log-applet: main.c
	$(CC) $(CFLAGS) $(LDFLAGS) -o $@ main.c $(LIBS)

xmonad-log-applet.desktop: xmonad-log-applet.desktop.in
	$(SED) -e 's!@LIBEXECDIR@!$(libexecdir)!g' \
	       -e 's!@DATAROOTDIR@!$(datarootdir)!g' < $^ > $@

clean:
	rm -f xmonad-log-applet xmonad-log-applet.desktop


